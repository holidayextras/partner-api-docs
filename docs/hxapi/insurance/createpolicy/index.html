<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title></title>
    <meta name="description" content="">
    <link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/search.css">
    <link rel="stylesheet" href="/css/tabs.css">
    <link rel="icon" type="image/png" href="https://d17s4kc6349e5h.cloudfront.net/holidayextras/assets/images/favicons/favicon_32.png" sizes="32x32"/>
    <link rel="icon" type="image/png" href="https://d17s4kc6349e5h.cloudfront.net/holidayextras/assets/images/favicons/favicon_196.png" sizes="196x196"/>
    <link rel="icon" type="image/png" href="https://d17s4kc6349e5h.cloudfront.net/holidayextras/assets/images/favicons/favicon_96.png" sizes="96x96"/>
    <link rel="icon" type="image/png" href="https://d17s4kc6349e5h.cloudfront.net/holidayextras/assets/images/favicons/favicon_16.png" sizes="16x16"/>
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="https://www.holidayextras.co.uk/"></a>
    </div>
    <a class="navbar-title pull-left" href="/">
      Holiday Extras API
    </a>
    <form class="navbar-form navbar-right" id="search-form" method="get" action="/search">
      <div class="input-group input-group-lg">
        <input type="text" name="query" class="form-control" id="search-box" placeholder="Search for...">
        <span class="input-group-btn">
          <button class="btn btn-default" type="submit">Go!</button>
        </span>
      </div>
    </form>
  </div>
</nav>


    <div class="container">
      <main role="main">
        <div class="panel-body">
  <h1 id="insurance-create-policy">Insurance Create Policy</h1>

<p><a href="/hxapi/">API Docs</a> &gt; product:<a href="/hxapi/insurance/createpolicy">Insurance</a></p>

<h2 id="create-insurance-policy-request">Create Insurance Policy Request</h2>

<p>This endpoint will create a new insurance policy.</p>

<p>Please note: we do not have a test environment for insurance, so you will be unable to use <code class="language-plaintext highlighter-rouge">api-sandbox.holidayextras.com</code>. To make test policies you will need to follow these rules:</p>

<ol>
  <li>Make the policy more than 3 months from the search date;</li>
  <li>Do not have more than 3 test policies live at any one point;</li>
  <li>Please advise your Account Manager so the test policies can be cancelled down in our system.</li>
</ol>

<p>Failing to notify us of test policies being made will result in your account being charged for these.</p>

<h3 id="method">Method</h3>

<p>POST</p>

<h3 id="endpoint">Endpoint</h3>

<p>To create an insurance policy, the endpoint to use is (where <code class="language-plaintext highlighter-rouge">CertificateRef</code> is returned in the options response):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://api.holidayextras.com/v1/insurancepolicy/CertificateRef
</code></pre></div></div>

<h3 id="request-parameters">Request Parameters</h3>

<p>NB: All parameter names are case sensitive.</p>

<table>
  <tbody>
    <tr>
      <td>Name</td>
      <td>Data Type</td>
      <td>Format</td>
      <td>Mandatory?</td>
      <td>Additional Information</td>
    </tr>
    <tr>
      <td>ABTANumber</td>
      <td>String</td>
      <td>[A-Z0-9] 5 chars</td>
      <td>Y</td>
      <td>This is also known as an ‘agent code’. <br />This will be confirmed to you by your Account Manager during set up.</td>
    </tr>
    <tr>
      <td>Password</td>
      <td>String</td>
      <td>[A-Z0-9] 5 chars</td>
      <td>Y</td>
      <td>Password required for retail agent requests - intermediaries do not require a password.<br />This will be confirmed to you by your Account Manager during set up.</td>
    </tr>
    <tr>
      <td>key</td>
      <td>String</td>
      <td>[A-Z]</td>
      <td>Y</td>
      <td>This will be assigned to you by your Account Manager during set up.</td>
    </tr>
    <tr>
      <td>token</td>
      <td>String</td>
      <td>[0-9] 9 chars</td>
      <td>Y</td>
      <td>Please see <a href="/hxapi/usertoken">user token endpoint</a> for details of how to generate a token.</td>
    </tr>
    <tr>
      <td>Address[]</td>
      <td>String</td>
      <td>[0-9] 20 chars</td>
      <td>Y</td>
      <td>First line of address (house name / number and road) of customer. <br />If you require more than 1 address line, then you can replicate this field and increment the number in square brackets, i.e. “Address[1]” for address line 2, and so on.</td>
    </tr>
    <tr>
      <td>Town</td>
      <td>String</td>
      <td>[0-9] 4 chars</td>
      <td>Y</td>
      <td>Town of address.</td>
    </tr>
    <tr>
      <td>County</td>
      <td>String</td>
      <td>[0-9] 4 chars</td>
      <td>Y</td>
      <td>County of address.</td>
    </tr>
    <tr>
      <td>PostCode</td>
      <td>String</td>
      <td>[0-9] 4 chars</td>
      <td>Y</td>
      <td>Post code of address.</td>
    </tr>
    <tr>
      <td>Email</td>
      <td>String</td>
      <td>[0-9] 4 chars</td>
      <td>Y</td>
      <td>Customer’s email.</td>
    </tr>
    <tr>
      <td>DayPhone</td>
      <td>Integer</td>
      <td>[0-9] 15 chars max</td>
      <td>N</td>
      <td>The customer’s telephone number.</td>
    </tr>
    <tr>
      <td>option</td>
      <td>Array</td>
      <td>[A-Z0-9]</td>
      <td>N</td>
      <td>Per policy options require <code class="language-plaintext highlighter-rouge">schemeoptionID</code>, <code class="language-plaintext highlighter-rouge">optionRateID</code>, <code class="language-plaintext highlighter-rouge">optionPrice</code> and <code class="language-plaintext highlighter-rouge">optionIPT</code>. Per person options also require the <code class="language-plaintext highlighter-rouge">CertificateClientID</code> of the person they are for. Per person options can be submitted multiple times with different CertificateClientIDs. This should be sent as a multidimensional array/hash. See the worked examples below for more information.</td>
    </tr>
  </tbody>
</table>

<h2 id="create-insurance-policy-response">Create Insurance Policy Response</h2>

<p>The create insurance policy response will return details of the insurance policy booked, and any options.</p>

<p>For a detailed explanation of the fields returned, please see below:</p>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Additional Information</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>familyGroupID</td>
      <td>TBC</td>
    </tr>
    <tr>
      <td>familyGroupName</td>
      <td>TBC</td>
    </tr>
    <tr>
      <td>keyFactsDocName</td>
      <td>TBC</td>
    </tr>
    <tr>
      <td>policyWordingDocName</td>
      <td>TBC</td>
    </tr>
    <tr>
      <td>SourceSystem</td>
      <td>TBC</td>
    </tr>
    <tr>
      <td>ResidenceID</td>
      <td>TBC</td>
    </tr>
    <tr>
      <td>CostofHoliday</td>
      <td>TBC</td>
    </tr>
    <tr>
      <td>QuoteExpired</td>
      <td>TBC</td>
    </tr>
    <tr>
      <td>FriendlyName</td>
      <td>TBC</td>
    </tr>
    <tr>
      <td>cover</td>
      <td>There are three elements to this: cancellation, medical and possessions. Each block will return details on the limits and excesses for each type of cover.</td>
    </tr>
    <tr>
      <td>Scheme</td>
      <td>This block provides a summary of the scheme details, including links to the policy wording and key facts. It also returns the <code class="language-plaintext highlighter-rouge">PolicyNumber</code>, which is required in all communication with us post booking, including where the customer needs to make a claim.</td>
    </tr>
    <tr>
      <td>PolicyOptions</td>
      <td>TBC</td>
    </tr>
    <tr>
      <td>ClientDetails</td>
      <td>This block returns the address and contact details for the customer.</td>
    </tr>
    <tr>
      <td>Itinerary</td>
      <td>This block shows a summary of the date and destinations covered by the policy.</td>
    </tr>
    <tr>
      <td>Pricing</td>
      <td>This block provides a breakdown of the pricing elements, including gross, net and IPT.</td>
    </tr>
    <tr>
      <td>People</td>
      <td>This block returns details of the individuals under the policy’s cover (as provided in previous requests).</td>
    </tr>
    <tr>
      <td>API_Header</td>
      <td>The API returns every parameter and value you sent in the previous request.</td>
    </tr>
  </tbody>
</table>

<h3 id="payment">Payment</h3>

<p>In the UK, we are PCI DSS compliant and so we do not accept customers’ payment details being passed to us via the API. Further details can be found in our section on <a href="/hxapi/payment">Payment</a>.</p>

<p>Please contact your Account Manager if you have any questions concerning payment.</p>

<h3 id="policy-wording-and-key-facts">Policy Wording and Key Facts</h3>

<p>It is mandatory that the customer has access to the both the Policy Wording and the Key Facts document, as insurance is a financial product and subject to additional regulations around its point of sale. Both of these documents are available in the insurance schemes availability response and create insurance policy response (pre- and post-booking).</p>

<h2 id="worked-examples">Worked Examples</h2>

<p>Below are worked examples of both the request and response for creating an insurance policy.</p>

<h3 id="create-insurance-policy-request-1">Create Insurance Policy Request</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://api.holidayextras.com/v1/insurancepolicy/YourCertificateRef
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    &lt;Request&gt;
      &lt;ABTANumber&gt;YourABTANumber&lt;/ABTANumber&gt;
      &lt;Password&gt;YourPassword&lt;/Password&gt;
      &lt;key&gt;YourKey&lt;/key&gt;
      &lt;token&gt;YourToken&lt;/token&gt;
      &lt;title[]&gt;Mr&lt;/title[]&gt;
      &lt;firstName[]&gt;Test&lt;/firstName&gt;
      &lt;lastName[]&gt;Test&lt;/lastName&gt;
      &lt;destinationID&gt;13&lt;/destinationID&gt;
      &lt;schemePrice&gt;9.13&lt;/schemePrice&gt;
      &lt;Address[]&gt;1 Test Street&lt;/Address[]&gt;
      &lt;Town&gt;Testville&lt;/Town&gt;
      &lt;County&gt;Testshire&lt;/County&gt;
      &lt;PostCode&gt;TE1 STZ&lt;/PostCode&gt;
      &lt;DayPhone&gt;01234567890&lt;/DayPhone&gt;
      &lt;Email&gt;test@test.com&lt;/Email&gt;
      &lt;option&gt;61389&lt;/option&gt;
    &lt;/Request&gt;
</code></pre></div></div>

<h3 id="create-insurance-policy-response-1">Create Insurance Policy Response</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" ?&gt;</span>
<span class="nt">&lt;API_Reply&gt;</span>
    <span class="nt">&lt;familyGroupID&gt;</span>1<span class="nt">&lt;/familyGroupID&gt;</span>
    <span class="nt">&lt;familyGroupName&gt;</span>Individual<span class="nt">&lt;/familyGroupName&gt;</span>
    <span class="nt">&lt;keyFactsDocName&gt;&lt;/keyFactsDocName&gt;</span>
    <span class="nt">&lt;policyWordingDocName&gt;</span>HXMainAgent0317(HX001).pdf<span class="nt">&lt;/policyWordingDocName&gt;</span>
    <span class="nt">&lt;SourceSystem&gt;</span>1<span class="nt">&lt;/SourceSystem&gt;</span>
    <span class="nt">&lt;ResidenceID&gt;</span>1<span class="nt">&lt;/ResidenceID&gt;</span>
    <span class="nt">&lt;CostOfHoliday&gt;</span>0<span class="nt">&lt;/CostOfHoliday&gt;</span>
    <span class="nt">&lt;QuoteExpired&gt;</span>false<span class="nt">&lt;/QuoteExpired&gt;</span>
    <span class="nt">&lt;FriendlyName&gt;&lt;/FriendlyName&gt;</span>
    <span class="nt">&lt;cover&gt;</span>
        <span class="nt">&lt;cancellation&gt;</span>
            <span class="nt">&lt;sectionid&gt;</span>1<span class="nt">&lt;/sectionid&gt;</span>
            <span class="nt">&lt;section&gt;</span>Cancellation Cover<span class="nt">&lt;/section&gt;</span>
            <span class="nt">&lt;sectionNumber&gt;</span>B<span class="nt">&lt;/sectionNumber&gt;</span>
            <span class="nt">&lt;limit&gt;</span>500<span class="nt">&lt;/limit&gt;</span>
            <span class="nt">&lt;excess&gt;</span>75<span class="nt">&lt;/excess&gt;</span>
        <span class="nt">&lt;/cancellation&gt;</span>
        <span class="nt">&lt;medical&gt;</span>
            <span class="nt">&lt;sectionid&gt;</span>7<span class="nt">&lt;/sectionid&gt;</span>
            <span class="nt">&lt;section&gt;</span>Medical Emergency Expenses<span class="nt">&lt;/section&gt;</span>
            <span class="nt">&lt;sectionNumber&gt;</span>D<span class="nt">&lt;/sectionNumber&gt;</span>
            <span class="nt">&lt;limit&gt;</span>5000000<span class="nt">&lt;/limit&gt;</span>
            <span class="nt">&lt;excess&gt;</span>100<span class="nt">&lt;/excess&gt;</span>
        <span class="nt">&lt;/medical&gt;</span>
        <span class="nt">&lt;possessions&gt;</span>
            <span class="nt">&lt;sectionid&gt;</span>5<span class="nt">&lt;/sectionid&gt;</span>
            <span class="nt">&lt;section&gt;</span>Personal possessions<span class="nt">&lt;/section&gt;</span>
            <span class="nt">&lt;sectionNumber&gt;</span>G1<span class="nt">&lt;/sectionNumber&gt;</span>
            <span class="nt">&lt;limit&gt;</span>500<span class="nt">&lt;/limit&gt;</span>
            <span class="nt">&lt;excess&gt;</span>75<span class="nt">&lt;/excess&gt;</span>
        <span class="nt">&lt;/possessions&gt;</span>
    <span class="nt">&lt;/cover&gt;</span>
    <span class="nt">&lt;Scheme&gt;</span>
        <span class="nt">&lt;schemeID&gt;</span>8673<span class="nt">&lt;/schemeID&gt;</span>
        <span class="nt">&lt;schemeName&gt;</span>OTA Bronze A2B<span class="nt">&lt;/schemeName&gt;</span>
        <span class="nt">&lt;purchaseDate&gt;</span>2017-09-01<span class="nt">&lt;/purchaseDate&gt;</span>
        <span class="nt">&lt;policyWording&gt;</span>http://secure.holidayextras.co.uk/images/groups/insurancemagenta/policy_wording/HXMainAgent0317(HX001).pdf<span class="nt">&lt;/policyWording&gt;</span>
        <span class="nt">&lt;PolicyNumber&gt;</span>ITEST100067<span class="nt">&lt;/PolicyNumber&gt;</span>
        <span class="nt">&lt;Annual&gt;</span>N<span class="nt">&lt;/Annual&gt;</span>
        <span class="nt">&lt;keyFacts&gt;</span>http://secure.holidayextras.co.uk/images/groups/insurancemagenta/policy_wording/<span class="nt">&lt;/keyFacts&gt;</span>
    <span class="nt">&lt;/Scheme&gt;</span>
    <span class="nt">&lt;PolicyOptions&gt;&lt;/PolicyOptions&gt;</span>
    <span class="nt">&lt;ClientDetails&gt;</span>
        <span class="nt">&lt;address&gt;</span>
            <span class="nt">&lt;address1&gt;</span>Test<span class="nt">&lt;/address1&gt;</span>
            <span class="nt">&lt;address2&gt;&lt;/address2&gt;</span>
            <span class="nt">&lt;address3&gt;&lt;/address3&gt;</span>
            <span class="nt">&lt;address4&gt;</span>Test<span class="nt">&lt;/address4&gt;</span>
            <span class="nt">&lt;address5&gt;</span>Test<span class="nt">&lt;/address5&gt;</span>
            <span class="nt">&lt;postcode&gt;</span>CT214JF<span class="nt">&lt;/postcode&gt;</span>
        <span class="nt">&lt;/address&gt;</span>
        <span class="nt">&lt;email&gt;</span>caroline.woodhams@holidayextras.com<span class="nt">&lt;/email&gt;</span>
        <span class="nt">&lt;dayPhone&gt;</span>01234567890<span class="nt">&lt;/dayPhone&gt;</span>
    <span class="nt">&lt;/ClientDetails&gt;</span>
    <span class="nt">&lt;Itinerary&gt;</span>
        <span class="nt">&lt;startDate&gt;</span>2017-12-01<span class="nt">&lt;/startDate&gt;</span>
        <span class="nt">&lt;endDate&gt;</span>2017-12-08<span class="nt">&lt;/endDate&gt;</span>
        <span class="nt">&lt;destinationName&gt;</span>Europe (exc Spain, Cyprus, Malta, Turkey and Greece)<span class="nt">&lt;/destinationName&gt;</span>
    <span class="nt">&lt;/Itinerary&gt;</span>
    <span class="nt">&lt;Pricing&gt;</span>
        <span class="nt">&lt;grossAmount&gt;</span>9.13<span class="nt">&lt;/grossAmount&gt;</span>
        <span class="nt">&lt;netAmount&gt;</span>6.01<span class="nt">&lt;/netAmount&gt;</span>
        <span class="nt">&lt;overallAmount&gt;</span>9.13<span class="nt">&lt;/overallAmount&gt;</span>
        <span class="nt">&lt;premiumIPTAmount&gt;</span>1.52<span class="nt">&lt;/premiumIPTAmount&gt;</span>
        <span class="nt">&lt;medicalAmount&gt;</span>0<span class="nt">&lt;/medicalAmount&gt;</span>
        <span class="nt">&lt;optionsIPT&gt;</span>0<span class="nt">&lt;/optionsIPT&gt;</span>
        <span class="nt">&lt;optionsNett&gt;</span>0<span class="nt">&lt;/optionsNett&gt;</span>
        <span class="nt">&lt;optionsAmount&gt;</span>0<span class="nt">&lt;/optionsAmount&gt;</span>
        <span class="nt">&lt;overallNett&gt;</span>6.01<span class="nt">&lt;/overallNett&gt;</span>
        <span class="nt">&lt;overallIPTAmount&gt;</span>1.52<span class="nt">&lt;/overallIPTAmount&gt;</span>
        <span class="nt">&lt;premiumComm&gt;</span>1.6<span class="nt">&lt;/premiumComm&gt;</span>
        <span class="nt">&lt;optionsComm&gt;</span>0<span class="nt">&lt;/optionsComm&gt;</span>
        <span class="nt">&lt;overallComm&gt;</span>1.6<span class="nt">&lt;/overallComm&gt;</span>
        <span class="nt">&lt;overallNet&gt;</span>7.61<span class="nt">&lt;/overallNet&gt;</span>
    <span class="nt">&lt;/Pricing&gt;</span>
    <span class="nt">&lt;People&gt;</span>
        <span class="nt">&lt;PersonDetails&gt;</span>
            <span class="nt">&lt;ClientID&gt;</span>22893377<span class="nt">&lt;/ClientID&gt;</span>
            <span class="nt">&lt;title&gt;</span>Mr<span class="nt">&lt;/title&gt;</span>
            <span class="nt">&lt;firstName&gt;</span>Test<span class="nt">&lt;/firstName&gt;</span>
            <span class="nt">&lt;lastName&gt;</span>Test<span class="nt">&lt;/lastName&gt;</span>
            <span class="nt">&lt;birthDate&gt;</span>1970-01-01<span class="nt">&lt;/birthDate&gt;</span>
            <span class="nt">&lt;TravellerNumber&gt;&lt;/TravellerNumber&gt;</span>
            <span class="nt">&lt;Screening&gt;</span>0<span class="nt">&lt;/Screening&gt;</span>
            <span class="nt">&lt;arrSchemePersonOption&gt;&lt;/arrSchemePersonOption&gt;</span>
            <span class="nt">&lt;MembershipNumber&gt;&lt;/MembershipNumber&gt;</span>
            <span class="nt">&lt;AnnualSalary&gt;&lt;/AnnualSalary&gt;</span>
            <span class="nt">&lt;NoMail&gt;</span>false<span class="nt">&lt;/NoMail&gt;</span>
            <span class="nt">&lt;IsStudent&gt;</span>false<span class="nt">&lt;/IsStudent&gt;</span>
        <span class="nt">&lt;/PersonDetails&gt;</span>
    <span class="nt">&lt;/People&gt;</span>
    <span class="nt">&lt;API_Header&gt;</span>
        <span class="nt">&lt;Request&gt;</span>
            <span class="nt">&lt;ABTANumber&gt;</span>YourABTANumber<span class="nt">&lt;/ABTANumber&gt;</span>
            <span class="nt">&lt;Password&gt;</span>YourPassword<span class="nt">&lt;/Password&gt;</span>
            <span class="nt">&lt;key&gt;</span>YourKey<span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;token&gt;</span>YourToken<span class="nt">&lt;/token&gt;</span>
            <span class="nt">&lt;title&gt;</span>Mr<span class="nt">&lt;/title&gt;</span>
            <span class="nt">&lt;firstName&gt;</span>Test<span class="nt">&lt;/firstName&gt;</span>
            <span class="nt">&lt;lastName&gt;</span>Test<span class="nt">&lt;/lastName&gt;</span>
            <span class="nt">&lt;destinationID&gt;</span>13<span class="nt">&lt;/destinationID&gt;</span>
            <span class="nt">&lt;schemePrice&gt;</span>9.13<span class="nt">&lt;/schemePrice&gt;</span>
            <span class="nt">&lt;Address&gt;</span>1 Test Street<span class="nt">&lt;/Address&gt;</span>
            <span class="nt">&lt;Town&gt;</span>Testville<span class="nt">&lt;/Town&gt;</span>
            <span class="nt">&lt;County&gt;</span>Testshire<span class="nt">&lt;/County&gt;</span>
            <span class="nt">&lt;Postcode&gt;</span>TE1 STZ<span class="nt">&lt;/Postcode&gt;</span>
            <span class="nt">&lt;DayPhone&gt;</span>01234567890<span class="nt">&lt;/DayPhone&gt;</span>
            <span class="nt">&lt;Email&gt;</span>test@test.com<span class="nt">&lt;/Email&gt;</span>
            <span class="nt">&lt;option&gt;</span>61389<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;v&gt;</span>1<span class="nt">&lt;/v&gt;</span>
        <span class="nt">&lt;/Request&gt;</span>
    <span class="nt">&lt;/API_Header&gt;</span>
<span class="nt">&lt;/API_Reply&gt;</span>
</code></pre></div></div>

</div>

      </main>
    </div>
    <script src="/js/code-snippets.js"></script>
    <script src="/js/tabs.js"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-PTPVDF7');</script>
    <!-- End Google Tag Manager -->
  </body>
</html>
